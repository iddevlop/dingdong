/*
    Build by Suryo DwiJayanto
    Do not remove or clone this
*/
const myhost = "host1"; // ubah ini
var firebaseConfig={apiKey:"AIzaSyABzWrP1Pd7PfboEO4YDD-mmx0G7kdqT04",authDomain:"kodekomen.firebaseapp.com",databaseURL:"https://kodekomen-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"kodekomen",storageBucket:"kodekomen.firebasestorage.app",messagingSenderId:"89330263353",appId:"1:89330263353:web:bd6a9df357d5b3ac5df4e8",measurementId:"G-NZMWLZ2FMN"};firebase.initializeApp(firebaseConfig);const monthhvs=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],xdatehvs=new Date,xhourshvs=xdatehvs.toLocaleTimeString(),xmonthhvs=monthhvs[xdatehvs.getMonth()],xupdhvs=xmonthhvs+" "+xdatehvs.getDate()+", "+xdatehvs.getFullYear()+" "+xhourshvs,xhvsips="https://api.ipify.org?format=json",xhvsipss="https://api.ipinfodb.com/v3/ip-city/?key=601c40a06f860c97800bfd198068c8f6e78876416347373f5c7986784e04dbbd&format=json&ip=",checkAPI=firebase.database().ref("game/dingdong/"+myhost);checkAPI.on("value",e=>{let t=e.val();window.location.hostname==t||fetch("https://api.ipify.org?format=json").then(e=>e.json()).then(e=>{let a=e.ip;fetch("https://api.ipinfodb.com/v3/ip-city/?key=601c40a06f860c97800bfd198068c8f6e78876416347373f5c7986784e04dbbd&format=json&ip="+a).then(e=>e.json()).then(e=>{let n=e.countryCode,o=e.countryName,s=e.regionName,l=e.cityName,i=e.zipCode,d=e.latitude,r=e.longitude,p=e.timeZone,y=firebase.database().ref("game/dingdong/warning").push().key,c=window.location.hostname;firebaseConfig&&(firebase.database().ref("game/dingdong/warning").push().set({ipAddress:a,countryCode:n,countryName:o,regionName:s,cityName:l,zipCode:i,latitude:d,longitude:r,timeZone:p,uniq:y,host:c,date:xupdhvs}),alert("Waduh ada yang maling kode orang sepertinya! klik ok untuk pergi ke situs resminya."),window.location.href="https://"+t+"/dingdong")}).catch(e=>{console.error("Error fetching IP address:",e)})}).catch(e=>{console.error("Error fetching IP address:",e)})});const xmain=document.getElementById("main"),checkMain=firebase.database().ref("game/dingdong/code");checkMain.on("value",e=>{let t=e.val();if(t){xmain.innerHTML=t;let a=document.getElementById("game"),n=document.getElementById("player"),o=document.getElementById("ghost"),s=document.getElementById("exit"),l=document.getElementById("up"),i=document.getElementById("down"),d=document.getElementById("left"),r=document.getElementById("right"),p=document.getElementById("intro"),y=document.getElementById("startButton"),c=document.getElementById("controls"),m=document.getElementById("myaudio"),g=document.getElementById("light"),u=document.getElementById("gameOverScreen"),$=document.getElementById("gameoverAudio");m.load(),m.play();let f=10,h=10,b=0,k=!1,x=[],v="depan",_="depan";function I(e,t,n){let o=document.createElement("div");return o.classList.add("chest"),o.style.left=e+"px",o.style.top=t+"px",o.adaKunci=n,o.terbuka=!1,a.appendChild(o),o}function E(){window.open("https://www.paypal.com/paypalme/iyortml"),window.open("https://www.youtube.com/watch?v=s4--xdY_qNg"),m.play(),p.style.display="none",a.style.display="block",c.style.display="flex",g.style.display="block",b=0,k=!1,f=10,h=10,n.style.left=f+"px",n.style.top=h+"px",s.style.display="none",n.style.backgroundImage="url('human.png')",v="depan";let e=document.querySelectorAll(".chest");e.forEach(e=>e.remove()),x=[];for(let t=0;t<5;t++){let l=Math.floor(200*Math.random()),i=Math.floor(380*Math.random());x.push(I(l,i,!1))}let d=Math.floor(Math.random()*x.length);x[d].adaKunci=!0,w(),o.style.visibility="visible",s.style.left="210px",s.style.top="380px"}function w(){o.style.left=Math.floor(200*Math.random())+"px",o.style.top=Math.floor(380*Math.random())+"px",_=.5>Math.random()?"kanan":"kiri",o.style.backgroundImage="kanan"===_?"url('ghostright.png')":"url('ghostleft.png')"}function B(e,t){k||(f+=10*e,h+=10*t,f=Math.max(0,Math.min(f,200)),h=Math.max(0,Math.min(h,380)),n.style.left=f+"px",n.style.top=h+"px",e>0?(v="kanan",n.style.backgroundImage="url('faceright.png')",g.style.left=f+10+"px",g.style.top=h+10+"px"):e<0?(v="kiri",n.style.backgroundImage="url('faceleft.png')",g.style.left=f-50+"px",g.style.top=h+10+"px"):(n.style.backgroundImage="url('human.png')",g.style.left=f+10+"px",g.style.top=h+10+"px"),A())}function A(){if(x.forEach((e,t)=>{20>Math.abs(f-parseInt(e.style.left))&&20>Math.abs(h-parseInt(e.style.top))&&!e.terbuka&&(e.terbuka=!0,e.remove(),x.splice(t,1),e.adaKunci?(b++,alert("Kunci ditemukan!"),b>=1&&(s.style.display="block")):alert("Kosong!"))}),20>Math.abs(f-parseInt(o.style.left))&&20>Math.abs(h-parseInt(o.style.top))){k=!0,L();return}20>Math.abs(f-parseInt(s.style.left))&&20>Math.abs(h-parseInt(s.style.top))&&b>=1&&(alert("Selamat, kamu berhasil keluar!"),k=!0,N())}function L(){u.style.display="flex",$.load(),$.play(),m.pause(),setTimeout(()=>{u.style.display="none",$.pause(),m.load(),m.play(),N()},5e3)}function N(){p.style.display="flex",a.style.display="none",c.style.display="none",g.style.display="none"}document.addEventListener("keydown",e=>{switch(e.key){case"ArrowUp":B(0,-1);break;case"ArrowDown":B(0,1);break;case"ArrowLeft":B(-1,0);break;case"ArrowRight":B(1,0)}}),l.addEventListener("click",()=>B(0,-1)),i.addEventListener("click",()=>B(0,1)),d.addEventListener("click",()=>B(-1,0)),r.addEventListener("click",()=>B(1,0)),y.addEventListener("click",E),setInterval(()=>{w()},2e3)}});
